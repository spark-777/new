用户态切换到内核态的3种方式

1. 系统调用：用户态主动要求切换到内核态，从而使用内核提供的各项服务。比如，Linux创建进程时中用户态的`fork()`会调用到内核态的`sys_fork()`和`do_fork()`等。
2. 中断：外设完成用户请求后（如完成读写操作），发出中断信号，CPU暂停执行下一条要执行的指令，而去执行中断处理程序。
3. 异常：如发生缺页异常等，同样会切换到内核态进行处理。



# 进程

### 概念

- 进程由程序段，相关数据段和PCB三部分构成

**注**：PCB是进程存在的**唯一**标志

### 特征

### 状态与转换

- 运行态
- 就绪态
  - 进程获得了除处理机的一切所需资源
- 阻塞态==等待态
  - 进程正在等待某资源为可用(不包括处理机)，资源到时变为就绪态

- 创建态
  - 进程正在被创建
- 终止态
  - 进程正常结束或其他原因退出运行会转变为终止态

## 控制

### 进程的创建

- 终端用户登录系统，作业调度，系统提供服务，用户程序的应用请求等都会引起进程的创建
- 操作系统创建新进程的过程如下
  - 分配一个唯一的进程标识号，申请一个空白PCB(PCB是有限的)，若PCB申请失败，则创建失败
  - 为进程分配资源，从操作系统获得或者从父进程获得。若资源不足，进入创建态
  - 初始化PCB
  - 若就绪队列未满，则加入就绪队列